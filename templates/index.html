<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Sensei</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="shortcut icon" type="image/x-icon" href="/static/favicon.ico">
</head>
<body>
    <div class="header">
        <img src="{{ url_for('static', filename='apple_ninja.png') }}" alt="Apple Ninja">
    </div>
    <div class="container">
        <div id="chat-container" class="card mt-4">
            <div id="chat-output" class="card-body" style="height: 400px; overflow-y: scroll;"></div>
            <div class="card-footer">
                <div class="input-group">
                    <input type="text" id="chat-input" class="form-control" placeholder="Enter a sales objection: ">
                    <div class="input-group-append">
                        <button id="chat-submit" class="btn btn-primary">Send</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="prompt-container" class="mt-4">
            <h5>Sales Objection Examples:</h5>
            <div id="prompts"></div>
        </div>
    </div>

    <script>
        const examplePrompts = [
            "This isn’t a good time",
            "I’m the wrong person to talk to about this",
            "I need to get more quotes first",
            "I don’t want to sign a long contract",
            "Your competitor is cheaper",
            "I don’t see any ROI potential",
            "This looks too complicated for my team to learn",
            "We’re using this budget elsewhere",
            "This is too expensive",
            "We’re happy with the way things are",
            "We don’t have a big enough team for this",
            "I'm not authorized to sign off on this purchase",
            "I can't sell this internally",
        ];

        function displayExamplePrompts() {
            const container = document.getElementById("prompts");
            examplePrompts.forEach(prompt => {
                const div = document.createElement("div");
                div.classList.add("prompt");
                div.textContent = prompt;
                div.onclick = () => {
                    document.getElementById("chat-input").value = prompt;
                };
                container.appendChild(div);
            });
        }

        displayExamplePrompts();
    </script>

<script>
async function sendChatMessage(message) {
    const response = await fetch('/chatbot', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ user_input: message })
    });

    return await response.json();
}

document.getElementById("chat-submit").addEventListener("click", async () => {
    const chatInput = document.getElementById("chat-input");
    const message = chatInput.value;

    if (message) {
        const chatOutput = document.getElementById("chat-output");
        const response = await sendChatMessage(message);

        const userMessage = document.createElement("div");
        userMessage.innerHTML = `<strong>Salesperson:</strong> ${message}`;
        chatOutput.appendChild(userMessage);

        const chatbotMessage = document.createElement("div");
        chatbotMessage.innerHTML = `<strong>Sales Sensei:</strong> ${response}`;
        chatOutput.appendChild(chatbotMessage);

        chatOutput.scrollTop = chatOutput.scrollHeight;

        chatInput.value = "";
    }
});
</script>

</body>

<footer>
    <a href="https://www.producthunt.com/posts/sales-sensei?utm_source=badge-featured&utm_medium=badge&utm_souce=badge-sales&#0045;sensei" target="_blank">
        <img src="https://api.producthunt.com/widgets/embed-image/v1/featured.svg?post_id=391473&theme=dark" alt="Sales Sensei - Eviscerate any sales objection | Product Hunt" style="width: 250px; height: 54px;" width="250" height="54" />
    </a>
</footer>

</html>